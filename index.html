<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tabungan & Pengeluaran Modern</title>

<!-- Chart.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
/* Reset & Font */
* { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; }
body { background: #f0f2f5; transition: background 0.3s, color 0.3s; }

/* Dark Mode */
body.dark-mode { background: #121212; color: #e0e0e0; }
body.dark-mode .card { background: #1f1f1f; color: #e0e0e0; }
body.dark-mode table { color: #e0e0e0; }
body.dark-mode table th { background: #2c2c2c; }

/* Login Page */
#loginPage {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background: linear-gradient(135deg, #4CAF50, #81C784);
    overflow: hidden;
    position: relative;
}

#loginPage::before {
    content: '';
    position: absolute;
    width: 100%; height: 100%;
    background: url('https://images.unsplash.com/photo-1522202176988-66273c2fd55f?fit=crop&w=1350&q=80') center/cover no-repeat;
    filter: blur(8px) brightness(0.6);
    z-index: 0;
}

#loginBox {
    position: relative;
    z-index: 1;
    background: rgba(255,255,255,0.9);
    padding: 40px;
    border-radius: 12px;
    width: 350px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    text-align: center;
}

#loginBox input { width: 100%; margin-bottom: 15px; padding: 12px; border-radius: 8px; border: 1px solid #ccc; }
#loginBox button {
    width: 100%; padding: 12px; border-radius: 8px; border: none;
    background: linear-gradient(45deg, #4CAF50, #81C784); color: white; font-weight: bold;
    cursor: pointer; transition: 0.3s;
}
#loginBox button:hover { background: linear-gradient(45deg, #388E3C, #66BB6A); }

/* Header */
header { background: #4CAF50; color: white; padding: 20px; text-align: center; position: relative; }
body.dark-mode header { background: #1f1f1f; color: #e0e0e0; }

/* Toggle Mode Button */
#toggleMode { position: absolute; right: 20px; top: 20px; padding: 6px 12px; font-size: 0.9em;
    background: #fff; border: none; border-radius: 8px; cursor: pointer; transition: 0.3s; font-weight: bold; }
body.dark-mode #toggleMode { background: #333; color: #fff; }

/* Container */
.container { max-width: 1000px; margin: 30px auto; padding: 0 15px; }

/* Card Layout */
.card { background: white; border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); transition: background 0.3s, color 0.3s; }
body.dark-mode .card { background: #1f1f1f; }

/* Input Form */
.card h2 { margin-bottom: 15px; color: #333; }
.card label { display: block; margin: 10px 0 5px; font-weight: bold; }
.card input, .card select, .card button { width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #ccc; margin-bottom: 10px; }
.card button { background: linear-gradient(45deg, #4CAF50, #81C784); color: white; font-weight: bold; border: none; cursor: pointer; transition: 0.3s; }
.card button:hover { background: linear-gradient(45deg, #388E3C, #66BB6A); }

/* Summary Cards */
.summary-container { display: flex; gap: 20px; flex-wrap: wrap; margin-top: 20px; }
.summary-card { flex: 1; min-width: 200px; padding: 20px; border-radius: 12px; background: #e8f5e9; color: #2e7d32; font-weight: bold; text-align: center; box-shadow: 0 5px 15px rgba(0,0,0,0.1); transition: background 0.3s, color 0.3s; }
.summary-card.expense { background: #ffebee; color: #c62828; }
.summary-card.balance { background: #e3f2fd; color: #1565c0; }
body.dark-mode .summary-card { background: #2c2c2c; color: #e0e0e0; }

/* Table */
table { width: 100%; border-collapse: collapse; margin-top: 10px; }
th, td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
th { background: #4CAF50; color: white; }
tr:nth-child(even) { background: #f9f9f9; }
tr:hover { background: #e0f7fa; }
body.dark-mode tr:nth-child(even) { background: #2a2a2a; }
body.dark-mode tr:hover { background: #333; }

/* Chart */
canvas { margin-top: 20px; background: #fff; border-radius: 12px; padding: 20px; }
body.dark-mode canvas { background: #1f1f1f; }
</style>
</head>
<body>

<!-- Login Page -->
<div id="loginPage">
    <div id="loginBox">
        <h2>Login</h2>
        <input type="text" id="username" placeholder="Username">
        <input type="password" id="password" placeholder="Password">
        <button onclick="login()">Masuk</button>
    </div>
</div>

<!-- Dashboard Aplikasi -->
<div id="app" style="display:none;">
    <header>
        <h1>Tabungan & Pengeluaran Bulanan</h1>
        <button id="toggleMode" onclick="toggleDarkMode()">Mode Gelap</button>
    </header>

    <div class="container">
        <!-- Input Form -->
        <div class="card">
            <h2>Tambah Transaksi</h2>
            <label for="date">Tanggal:</label>
            <input type="date" id="date">

            <label for="type">Jenis:</label>
            <select id="type">
                <option value="tabungan">Tabungan</option>
                <option value="pengeluaran">Pengeluaran</option>
            </select>

            <label for="amount">Jumlah (Rp):</label>
            <input type="number" id="amount" placeholder="Masukkan jumlah">

            <button onclick="addTransaction()">Tambah</button>
        </div>

        <!-- Summary Cards -->
        <div class="summary-container">
            <div class="summary-card" id="totalIncome">Total Tabungan: Rp 0</div>
            <div class="summary-card expense" id="totalExpense">Total Pengeluaran: Rp 0</div>
            <div class="summary-card balance" id="balance">Saldo Akhir: Rp 0</div>
        </div>

        <!-- Riwayat Transaksi -->
        <div class="card">
            <h2>Riwayat Bulanan</h2>
            <table>
                <thead>
                    <tr>
                        <th>Tanggal</th>
                        <th>Jenis</th>
                        <th>Jumlah (Rp)</th>
                    </tr>
                </thead>
                <tbody id="transactionTable"></tbody>
            </table>
        </div>

        <!-- Grafik -->
        <div class="card">
            <h2>Grafik Bulanan</h2>
            <canvas id="myChart" width="400" height="200"></canvas>
        </div>
    </div>
</div>

<script>
let transactions = [];
let chart;

function login() {
    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;

    if(username === 'admin' && password === '1234'){
        document.getElementById('loginPage').style.display = 'none';
        document.getElementById('app').style.display = 'block';
    } else {
        alert('Username atau password salah!');
    }
}

function addTransaction() {
    const date = document.getElementById('date').value;
    const type = document.getElementById('type').value;
    const amount = parseInt(document.getElementById('amount').value);

    if (!date || !amount || amount <= 0) {
        alert("Tanggal dan jumlah harus valid!");
        return;
    }

    transactions.push({ date, type, amount });
    updateTable();
    updateSummary();
    updateChart();

    document.getElementById('date').value = '';
    document.getElementById('amount').value = '';
}

function updateTable() {
    const table = document.getElementById('transactionTable');
    table.innerHTML = '';
    transactions.forEach(trx => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${trx.date}</td>
            <td class="${trx.type === 'tabungan' ? 'income' : 'expense'}">${trx.type}</td>
            <td>${trx.amount.toLocaleString()}</td>
        `;
        table.appendChild(row);
    });
}

function updateSummary() {
    let totalIncome = 0;
    let totalExpense = 0;

    transactions.forEach(trx => {
        if(trx.type === 'tabungan') totalIncome += trx.amount;
        else totalExpense += trx.amount;
    });

    document.getElementById('totalIncome').innerText = 'Total Tabungan: Rp ' + totalIncome.toLocaleString();
    document.getElementById('totalExpense').innerText = 'Total Pengeluaran: Rp ' + totalExpense.toLocaleString();
    document.getElementById('balance').innerText = 'Saldo Akhir: Rp ' + (totalIncome - totalExpense).toLocaleString();
}

function updateChart() {
    const labels = [];
    const incomeData = [];
    const expenseData = [];
    const grouped = {};

    transactions.forEach(trx => {
        if(!grouped[trx.date]) grouped[trx.date] = { income:0, expense:0 };
        if(trx.type === 'tabungan') grouped[trx.date].income += trx.amount;
        else grouped[trx.date].expense += trx.amount;
    });

    Object.keys(grouped).sort().forEach(date => {
        labels.push(date);
        incomeData.push(grouped[date].income);
        expenseData.push(grouped[date].expense);
    });

    if(chart) chart.destroy();

    const ctx = document.getElementById('myChart').getContext('2d');
    chart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [
                { label: 'Tabungan', data: incomeData, backgroundColor: 'green' },
                { label: 'Pengeluaran', data: expenseData, backgroundColor: 'red' }
            ]
        },
        options: {
            responsive: true,
            plugins: { legend: { position: 'top' } },
            scales: { y: { beginAtZero: true } }
        }
    });
}

// Dark Mode Toggle
function toggleDarkMode() {
    document.body.classList.toggle('dark-mode');
    document.getElementById('toggleMode').innerText = document.body.classList.contains('dark-mode') ? 'Mode Terang' : 'Mode Gelap';
}
</script>
</body>
</html>
